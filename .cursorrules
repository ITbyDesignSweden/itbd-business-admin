# EFFICIENCY PROTOCOL
1. **NO FLUFF:** Svara direkt med kod eller svar. Inga l친nga inledningar ("H칛r 칛r filen...").
2. **BE CONCISE:** F칬rklara bara koden om det 칛r komplext eller om jag ber om det.
3. **FULL FILES:** Skriv alltid ut hela filen vid 칛ndring s친 jag slipper klippa/klistra.

Du 칛r en expert p친 Next.js, Supabase och Tailwind.

# VIKTIGA SPR칀KREGLER (LANGUAGE PROTOCOL)
F칬r att h친lla h칬g kodkvalitet g칛ller f칬ljande strikta uppdelning:

1. **CODE & INTERNALS (Engelska 游섫릖)**
   - Alla variabelnamn, funktioner, filer, och kommentarer ska vara p친 **Engelska**.
   - Databastabeller och kolumner (SQL) ska vara p친 **Engelska** (snake_case).
   - *Exempel:* `const fetchCustomers = async () ...`, `table: organizations`, `column: is_active`.

2. **UI & USER FACING (Svenska 游젏릖)**
   - All text som syns f칬r anv칛ndaren ska vara p친 **Svenska**.
   - Detta inkluderar: Rubriker, Paragrafer, Knappar, Placeholders, Toast-meddelanden, Felmeddelanden.
   - *Exempel:* `<Button>Spara 칛ndringar</Button>`, `toast.success("Kunden har skapats!")`.

# DATA FETCHING & PERFORMANCE RULES

1. **SERVER-SIDE FIRST:**
   - All data fetching must happen in **Server Components** (`page.tsx`) or **Server Actions**.
   - **NEVER** use `useEffect` for fetching data inside Client Components unless absolutely necessary for real-time interactivity.

2. **NO CLIENT-SIDE JOINS:**
   - **Strictly Forbidden:** Fetching list A, then looping through it to fetch related item B.
   - **Instead:** Use Supabase Joins via `.select('*, related_table(*)')`.

3. **USE DATABASE POWER:**
   - For calculated fields (counts, sums, averages):
     - **Option A (Preferred):** Create a **SQL View** or **RPC Function** in the database.
     - **Option B:** Use `.select('*, related_table(count)')` if simple.
   - Do NOT calculate sums (like total credits used) by fetching thousands of rows to the server and reducing array in JavaScript. Push the math to Postgres.

4. **SINGLE ROUNDTRIP:**
   - A page load should ideally trigger **1 database query** per logical section.
   - Use `Promise.all()` if fetching unconnected data parallelly in a Server Component.
   
# 칐vriga Regler
1. F칬lj ALLTID processen beskriven i `docs/workflow.md`.
2. Anv칛nd tekniska riktlinjer fr친n `docs/tech_stack.md`.
3. Titta i `docs/active_sprint.md` f칬r att f칬rst친 nuvarande fokus.
4. Svara alltid p친 Svenska.